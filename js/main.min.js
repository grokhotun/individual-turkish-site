"use strict";window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){t=t||window;for(var n=0;n<this.length;n++)e.call(t,this[n],n,this)});var inputsFilter=function(){document.querySelectorAll(".js-only-digits").forEach((function(e){e.addEventListener("input",(function(e){e.target.value=e.target.value.replace(/\D/g,"")}))}))},formValidation=function(){document.querySelectorAll(".form").forEach((function(e){var t=new Pristine(e);e.addEventListener("submit",(function(n){n.preventDefault(),t.validate()?e.submit():setTimeout((function(){t.reset()}),5e3)}))}))},inputMasking=function(){document.querySelectorAll(".js-mask-phone").forEach((function(e){e.addEventListener("input",(function(e){VMasker(e.target).maskPattern("(999) 999-99-99")}))}))},popups=function(){var e=document.querySelectorAll(".popup"),t=document.querySelectorAll(".js-popup-open"),n=document.querySelectorAll(".js-popup-close"),o=document.querySelectorAll(".lock-padding"),i=document.querySelector("body"),r=null,l=null,a=!1,s=!1;function c(e){if(!a){a=!0;var t=document.querySelector(".popup.is-opened");t&&u(t,!1),e.classList.add("is-opened"),r=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",o.length>0&&o.forEach((function(e){e.style.paddingRight=r})),i.style.paddingRight=r,i.classList.add("lock")}}function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a||(a=!0,l=document.querySelector(".burger.is-active"),e.classList.remove("is-opened"),t&&!l&&(s=!0))}t.length>0&&t.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=document.querySelector(e.getAttribute("href"));n&&c(n)}))})),n.length>0&&n.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),u(e.closest(".popup"))}))})),e.length>0&&(e.forEach((function(e){e.addEventListener("transitionend",(function(e){"transform"===e.propertyName&&(a=!1,s&&(i.style.paddingRight="0px",i.classList.remove("lock"),o.length>0&&o.forEach((function(e){e.style.paddingRight="0px"})),s=!1))})),e.addEventListener("click",(function(e){e.target.closest(".popup__body")||u(e.target.closest(".popup.is-opened"))}))})),document.addEventListener("keydown",(function(e){if(27===e.which){var t=document.querySelector(".popup.is-opened");t&&u(t)}})))},imgToBackground=function(){document.querySelectorAll(".ibg").forEach((function(e){e.querySelector("img")&&(e.style.backgroundImage="url("+e.querySelector("img").getAttribute("src")+")",e.querySelector("img").style.display="none")}))},burgerMenu=function(e){var t=document.querySelector(".burger"),n=document.querySelector(".".concat(e));n&&t.addEventListener("click",(function(e){t.classList.toggle("is-active"),n.classList.toggle("is-shown"),document.querySelector("body").classList.toggle("lock")}))},sliders=function(){new Swiper(".slider-for-whom__container",{loop:!0,navigation:{nextEl:".for-whom__slider-btn--next",prevEl:".for-whom__slider-btn--prev"},spaceBetween:30,slidesPerView:1,breakpoints:{1470:{slidesPerView:4},800:{slidesPerView:2},1200:{slidesPerView:3}}}),new Swiper(".slider-teachers__container",{loop:!0,navigation:{nextEl:".slider-teachers__btn--next",prevEl:".slider-teachers__btn--prev"},spaceBetween:0,slidesPerView:1}),new Swiper(".slider-levels__container",{loop:!0,navigation:{nextEl:".levels__slider-btn--next",prevEl:".levels__slider-btn--prev"},spaceBetween:30,slidesPerView:1,breakpoints:{1470:{slidesPerView:4},800:{slidesPerView:2},1200:{slidesPerView:3}}}),new Swiper(".slider-testimonials__container",{loop:!0,pagination:{el:".slider-testimonials__pagination",type:"bullets"},spaceBetween:60,slidesPerView:1,breakpoints:{1470:{slidesPerView:4},800:{slidesPerView:2},1200:{slidesPerView:3}}})},preloader=function(){var e=document.querySelector(".preloader__body"),t=document.querySelector(".preloader"),n=document.querySelector("body");t&&(n.classList.add("lock"),new Promise((function(e){setTimeout(e,800)})).then((function(){e.style.display="none",t.classList.add("is-loaded"),n.classList.remove("lock")})))},htmlMover=function(){var e,t,n,o=document.querySelectorAll("[data-html-mover]"),i=[],r=[];function l(e){return Array.prototype.slice.call(e.parentNode.children).indexOf(e)}function a(e,t){t.before(e)}function s(e,t,n){var o=function(e,t){var n=e.children;return n.length>0?n[t]:null}(t,n);o?a(e,o):function(e,t){t.append(e)}(e,t)}function c(){i.forEach((function(e,t){var n,o,i="html-mover-".concat(e.breakpoint);if(r[t].matches)if(e.originalParent!==e.newParent){if(!e.movingElement.classList.contains(i)&&e.originalParent!==e.newParent){switch(e.newPlace){case"first":s(e.movingElement,e.newParent,0);break;case"last":s(e.movingElement,e.newParent);break;default:if(parseInt(e.newPlace)>=0)s(e.movingElement,e.newParent,parseInt(e.newPlace));else{var l=(n=e.newParent,o=e.newPlace,n.querySelector(".".concat(o)));l&&a(e.movingElement,l)}}e.movingElement.classList.add(i)}}else console.warn("HTML-mover: элемент",e.movingElement,"имеет неверный селектор!");else e.movingElement.classList.contains(i)&&(s(e.movingElement,e.originalParent,e.originalPlace),e.movingElement.classList.remove(i))}))}o.length>0&&(o.forEach((function(e,t){var n=e.getAttribute("data-html-mover").split(",");i[t]={movingElement:e,originalParent:e.parentNode,originalPlace:l(e),newParent:document.querySelector(".".concat(n[0]))||e.parentNode,newPlace:n[1].trim()||"last",breakpoint:parseInt(n[2].trim())||767}})),i.sort((function(e,t){return e.breakpoint>t.breakpoint?-1:1})),i.length>0&&i.forEach((function(e){r.push(window.matchMedia("(max-width: ".concat(e.breakpoint,"px")))})),c(),window.addEventListener("resize",(e=c,t=50,function(){var o=this,i=arguments;clearTimeout(n),n=setTimeout((function(){return e.apply(o,i)}),t)})))};document.addEventListener("DOMContentLoaded",(function(e){inputsFilter(),inputMasking(),imgToBackground(),sliders(),burgerMenu("burger-menu"),popups(),formValidation(),preloader(),svg4everybody(),htmlMover()}));